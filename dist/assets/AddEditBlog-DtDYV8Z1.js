import{p as T,q,r as p,s as E,c as m,g as o,a as l,b as B,t as v,e as h,w as y,f as d,R as N,i as b,k as _,m as U,h as R}from"./index-Cj4sq1c5.js";import{c as F,a as P,b as V,r as L,F as Y,i as k,d as w,t as g}from"./index-D1th-kIG.js";const j="/assets/blog-B7qjWSsn.png",A={class:"mx-auto my-10 flex justify-center items-center",style:{height:"80vh"}},G={class:"shadow-2xl p-10 m-10 rounded rounded-3xl"},H={class:"main-title"},W={class:"semi-title"},z={key:0,class:"bg-gray-200 mb-4 h-14 w-full rounded-md animate-pulse"},I={key:2,class:"error-message"},J={key:0,class:"bg-gray-200 mb-10 h-40 w-full rounded-md animate-pulse"},K={key:2,class:"error-message"},M=["disabled"],Z={__name:"AddEditBlog",setup(O){const C=F({Title:P().required().min(5).max(100),Description:P().required().min(10).max(1e3)}),x=R(),f=q(),i=T(()=>{var s;return(s=f==null?void 0:f.params)==null?void 0:s.id}),c=p(""),r=p(""),u=p(!1),n=p(!1),D=async()=>{u.value=!0;const s={title:c.value,description:r.value};await k.post(w.addPost,s).then(e=>{const t=e.data;g.success((t==null?void 0:t.message)??"Post Created Success!"),x.push("/")}).catch(e=>{var t,a;g.error(((a=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:a.message)??"Post Can't Create!")}).finally(()=>{u.value=!1})},$=async()=>{u.value=!0;const s={title:c.value,description:r.value};await k.put(`${w.editPost}${i.value}`,s).then(e=>{const t=e.data;g.success((t==null?void 0:t.message)??"Post Updated Success!"),x.push("/")}).catch(e=>{var t,a;g.error(((a=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:a.message)??"Post Can't Updating!")}).finally(()=>{u.value=!1})},S=async()=>{n.value=!0,await k.get(`${w.getPost}${i.value}`).then(s=>{const e=s.data.data;c.value=e.title,r.value=e.description}).catch(s=>{console.log(s)}).finally(()=>{n.value=!1})};return E(i,()=>{i.value&&S()},{immediate:!0}),(s,e)=>(o(),m("div",A,[e[7]||(e[7]=l("img",{src:j,alt:"Login",class:"h-96"},null,-1)),l("div",G,[l("h2",H,v(i.value?"Update Your ":"Create New ")+" Blog",1),l("p",W,[e[4]||(e[4]=h(" Share your ideas, insights, and stories with the world. ")),B(d(N),{to:"/",class:"link"},{default:y(()=>e[3]||(e[3]=[h(" Back to Home")])),_:1})]),B(d(Y),{onSubmit:e[2]||(e[2]=t=>i.value?$():D()),"validation-schema":d(C)},{default:y(({errors:t})=>[l("div",null,[e[5]||(e[5]=l("label",{for:"title",class:"label"},"Title",-1)),n.value?(o(),m("p",z)):(o(),b(d(V),{key:1,modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=a=>c.value=a),type:"text",id:"title",class:"input",placeholder:"Enter Your Title",name:"Title"},null,8,["modelValue"])),n.value?_("",!0):(o(),m("p",I,v(t==null?void 0:t.Title),1))]),l("div",null,[e[6]||(e[6]=l("label",{for:"blog",class:"label"},"Blog Description",-1)),n.value?(o(),m("p",J)):(o(),b(d(V),{key:1,modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value=a),name:"Description"},{default:y(({field:a})=>[l("textarea",U(a,{id:"blog",class:"input h-40",placeholder:"Enter Your Blog Description"}),null,16)]),_:1},8,["modelValue"])),n.value?_("",!0):(o(),m("p",K,v(t==null?void 0:t.Description),1))]),l("button",{type:"submit",class:"button mt-10",disabled:u.value||n.value},[h(v(i.value?"Edit":"Add")+" Blog ",1),u.value?(o(),b(d(L),{key:0,class:"w-6 mx-3"})):_("",!0)],8,M)]),_:1},8,["validation-schema"])])]))}};export{Z as default};
